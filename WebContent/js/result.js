var  dataList= new Array();
var count=10
var categories=new Array();
var chart2
var chart3
var data3=new Array()
$(document).ready(function () {
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });
    GetDataRes(1);
    var options2 = {
    		chart: {
    			type: 'column'                          //指定图表的类型，默认是折线图（line）
    		},
    		title: {
    			text: ''                 // 标题
    		},
    		xAxis: {
    			categories: categories
    		},
    		plotOptions :{   
    			column: {
     		        pointPadding: 0.2,
     		        borderWidth: 0,
     		        dataLabels: {
     		            enabled: true //设置显示对应y的值
     		        }
     		    }
    		},
    		yAxis: {
    			title: {
    				text: '剩余寿命'                // y 轴标题
    			}
    		}
    		,
    		series: [{                              // 数据列
    			name: '发动机号',                        // 数据列名
    			data: dataList     // 数据               
    		}]
    	};
     
   
    	chart2 = Highcharts.chart('containerRes', options2);
    	
    	
    	
    	var options3={
        		title: {
        			text: ''
        		},
        		xAxis: [{
        			title: { text: 'Data' }
        		}, {
        			title: { text: 'Histogram' },
        			opposite: false
        		}],
        		yAxis: [{
        			title: { text: 'Data' }
        		}, {
        			title: { text: 'Histogram' },
        			opposite: false
        		}],
        		series: [{
        			name: 'Histogram',
        			type: 'histogram',
        			xAxis: 1,
        			yAxis: 1,
        			baseSeries: 's1'
        			
        		}, {
        			name: 'Data',
        			
        			data: data3,
        			id: 's1',
        			marker: {
        				radius: 1.5
        			}
        		}]
    	};

    	chart3 = Highcharts.chart('container2', options3);
    	
    	
    	
    	
    	//加载散点图和正态分布
    	
    
    
    	
     	
    	
});





function GetDataRes(id){

	 var values
	 var colmon="91,47.872,107.37,144.5,73.671,56.505,214.4,181.31,120.39,30.44,-21.006,64.093,184.88,105.06,3.1636,224.47,131.1,124.15,169.74,77.435,215.44,203.52,45.4,527.76,67.35,82.422,195.13,214.05,117.38,117.86,141.33,81.878,51.006,147,-16.706,32.427,69.562,100.15,181.74,133.92,163.89,93.945,113.17,159.23,191.81,32.24,132.34,98.742,101.57,154.35,71.605,233.75,103.87,70.98,239.07,107.96,64.301,139.84,189.59,233.34,180.08,88.253,133.75,230.72,225.95,99.711,-22.722,76.29,24.129,163.37,56.765,92.567,134.03,46.277,78.854,55.444,136.55,8.4373,174.22,80.269,64.411,223.79,108.02,60.416,117.93,128.62,122.46,3.9452,243.43,13.177,27.987,32.503,63.245,121.8,131.78,107.35,197.98,71.598,82.799,84.526,42.735,40.031,148.16,99.516,159.43,207.7,68.155,130.64,39.935,124.09,98.278,74.49,81.265,47.892,16.846,70.167,95.164,49.559,70.608,30.412,51.354,64.84,42.2,109.24,7.8922,33.984,46.235,15.154,98.367,231.88,63.109,56.879,45.734,79.024,19.399,91.394,48.702,49.217,30.303,83.896,85.129,56.22,25.945,30.256,36.828,25.992,40.37,36.855,49.809,86.241,23.826,72.035,49.174,35.222,25.106,27.326,84.077,39.941,28.109,23.978,16.688"
	 if(id==1)
		 values="112,98,69,82,91,93,91,95,111,96,97,124,95,107,83,84,50,28,87,16,57,111,113,20,145,119,66,97,90,115,8,48,106,7,11,19,21,50,142,28,18,10,59,109,114,47,135,92,21,79,114,29,26,97,137,15,103,37,114,100,21,54,72,28,128,14,77,8,121,94,118,50,131,126,113,10,34,107,63,90,8,9,137,58,118,89,116,115,136,28,38,20,85,55,128,137,82,59,117,20\n" + 
		  			"";
			 if(id==2)
				 values= "95,167.57,238.72,90.178,192.07,285.17,116.05,-47.109,124.97,186.48,81.118,220.48,47.941,126.79,5.4389,131.21,175.38,141.34,-15.956,131.2,120.83,226.57,101.18,106.43,52.717,-6.3719,185.99,163.26,35.108,169.22,122.56,97.81,76.662,135.46,133.52,96.519,30.869,338.2,97.365,87.045,156.81,221.25,92.815,60.352,288.21,110.2,58.927,159.22,188.88,231.16,157.93,116.29,110.37,163.41,106.53,163.41,65.529,73.006,100.4,138.29,288.72,175.27,64.156,-64.405,62.758,144.77,126.99,81.774,193.84,72.545,148.4,89.87,33.528,44.792,43.636,108.91,282.86,122.4,87.919,78.857,140.21,76.169,-24.52,7.56,55.197,83.655,40.194,54.904,134.4,250.25,44.727,41.943,277.14,106.23,11.133,247.2,28.441,109.92,227.86,-17.041,45.559,36.285,70.097,85.987,66.478,74.564,43.055,71.927,43.966,40.626,159.16,0.89486,46.393,116.73,134.44,40.545,15.893,44.64,140.71,86.652,163.51,50.371,-5.2614,53.575,26.986,151.48,26.076,-45.436,37.3,92.224,40.406,51.225,51.499,48.256,39.987,37.563,26.272,40.428,44.487,49.466,36.646,25.899,123.07,41.074,35.711,16.465,140.49,86.566,13.582,33.926,124.61,31.862,35.054,75.267,9.9706,76.567,56.192,27.614,37.218,33.238,39.211,42.091,49.986,36.142,49.143,17.995,26.193"
				
				 if(id==3)
					 values= "44,51,27,120,101,99,71,55,55,66,77,115,115,31,108,56,136,132,85,56,18,119,78,9,58,11,88,144,124,89,79,55,71,65,87,137,145,22,8,41,131,115,128,69,111,7,137,55,135,11,78,120,87,87,55,93,88,40,49,128,129,58,117,28,115,87,92,103,100,63,35,45,99,117,45,27,86,20,18,133,15,6,145,104,56,25,68,144,41,51,81,14,67,10,127,113,123,17,8,28\n" + 
					 		"";
					 if(id==4)
						 values= "22,39,107,75,149,78,94,14,99,162,143,7,71,105,12,160,162,104,194,82,91,11,26,142,39,92,76,124,64,118,6,22,147,126,36,73,89,11,151,10,97,30,42,60,85,134,34,45,24,86,119,151,142,176,157,67,97,8,154,139,51,33,184,46,12,133,46,46,12,33,15,176,23,89,124,163,25,74,78,114,96,10,172,166,115,70,94,56,86,96,50,73,154,129,171,71,105,113,37,7,13,22,9,120,100,107,41,153,126,59,18,66,13,14,139,13,75,8,109,137,41,192,23,86,184,15,195,126,120,165,101,116,126,36,7,122,159,88,173,146,130,108,53,162,59,100,56,145,76,57,31,88,173,34,7,133,172,6,22,83,82,84,95,174,111,72,109,87,179,158,126,12,8,10,123,103,12,106,12,32,37,116,15,10,46,142,24,135,56,43,178,71,104,15,166,89,36,11,92,96,59,13,167,151,154,109,116,91,11,88,108,76,14,89,145,17,66,154,41,182,73,39,58,14,145,88,162,189,120,98,33,184,110,68,24,75,18,16,166,98,176,81,118,35,131,194,112,26\n" + 
						 		""; 
	 
					 
					 
					 var dataStrArr=values.split(",");
					 var dataStrArr2=colmon.split(",");
					 
					
					    //方法一  
					    dataStrArr.forEach(function(data,index,arr){  
					    	dataList.push(+data);  
					    	
					    });  
					 
					    dataStrArr2.forEach(function(data,index,arr){  
					    	data3.push(+data);  
					    	
					    }); 
					 
					 
					 for(var i=0;i<dataList.length;i++){
						
						 categories.push(i+1);
						// dataList.push(i);
					 }
					 
					
	 
	 
	 
	/*$.ajax({
		type : "post",
		async : false, //同步执行  
		url : "GetRes",
		data : {
			"id" : 1
		},
		dataType : "json", //返回数据形式为json  
		success : function(result) {
			
				alert("result is"+result)
			
		},
		error : function(errorMsg) {
			alert("图表请求数据失败!");
			//myChart.hideLoading();
		}
	});*/
					 
					 
 upDateTable(1)
}



//机组选择下拉列表被选择
function changeChart(){ 
	 dataList=[] 
	 categories=[]
	var now = $('select  option:selected').val(); 
	GetDataRes(now)
	 chart2.redraw();
    chart2.series[0].update({
    	data:dataList
    });
    upDateTable(now)   //update table

	
		
}





//发动机选择下拉列表被选择
function changeDevice(){ 
	data3=[]
	var select = document.getElementById("Device");
    var value = select.value;
  
    	var colmon="95,185.73,158.44,149.37,122.57,90.703,10.399,112.69,104.89,133.99,230.48,162.25,84.443,65.015,147.9,210.05,145.85,311.56,159.15,318.89,205.97,220.1,216.7,180.17,142.62,120.05,201.55,3.9704,83.893,204.08,55.807,218.82,78.61,95.081,159.98,37.072,65.755,84.617,59.468,128.22,34.756,174.43,140.54,65.769,72.562,132.22,163.29,93.585,156.68,120.86,77.102,139.69,120.01,139.19,140.13,-17.248,204.5,97.945,90.436,240.56,39.958,143.41,244.86,-9.545,175.65,75.968,125.22,93.718,274.09,88.725,111.01,121.81,236.48,190.34,61.068,136.56,66.479,196.84,41.4,188.57,45.777,97.521,150.54,245.12,82.219,301.71,199.3,166.05,126.97,37.408,141.69,84.353,54.984,149.38,219.37,139.64,119.26,87.344,193.72,54.922,173.94,54.854,5.3679,165.92,73.096,208.42,162.31,169,51.925,11.635,123.7,71.169,-40.74,147.27,75.056,44.559,117.32,46.191,84.092,94.96,187.89,97.189,86.529,35.021,52.331,51.9,122.64,50.071,189.06,0.90786,44.018,64.427,53.044,85.394,35.577,94.326,24.755,50.416,38.281,53.622,-0.68908,53.395,41.838,42.921,15.146,12.097,161.13,50.455,63.999,92.375,-39.429,26.907,77.258,53.837,58.903,76.963,48.547,44.82,33.622,46.92,43.092,10.615,11.787,119.5,84.218,51.064,95.598,48.81,42.061,25.935,23.849,46.724,52.073,22.49,41.894,61.783,35.063,50.096,48.389,22.33,49.466,47.742,28.94,39.247,28.547,23.495,39.237,24.64,25.101,21.539,31.024,41.386,37.124,27.713,11.338,12.339"
    if(value==1)
    	colmon= "18,79,106,110,15,155,6,90,11,79,6,73,30,11,37,67,68,99,22,54,97,10,142,77,88,163,126,138,83,78,75,11,53,173,63,100,151,55,48,37,44,27,18,6,15,112,131,13,122,13,98,53,52,106,103,152,123,26,178,73,169,39,39,14,11,121,86,56,115,17,148,104,78,86,98,36,94,52,91,15,141,74,146,17,47,194,21,79,97,8,9,73,183,97,73,49,31,97,9,14,106,8,8,106,116,120,61,168,35,80,9,50,151,78,91,7,181,150,106,15,67,145,180,7,179,124,82,108,79,121,120,39,38,9,167,87,88,7,51,55,155,47,81,43,98,10,92,11,165,34,115,59,99,103,108,83,171,15,9,42,13,41,88,14,155,188,96,82,135,182,36,107,14,95,142,23,6,144,35,97,68,14,67,191,19,10,158,183,43,12,148,13,37,122,80,93,132,32,103,174,111,68,192,121,134,48,85,8,23,8,6,57,83,172,101,81,86,165,73,121,139,75,151,145,11,108,14,126,61,85,8,101,153,89,190,12,62,134,101,121,167,17,161,181,16,152,148,56,111,23,84,12,43,48,122,191,56,131,51\n" + 
		 		"";
	 if(value==3)
		 colmon= "95,167.57,238.72,90.178,192.07,285.17,116.05,-47.109,124.97,186.48,81.118,220.48,47.941,126.79,5.4389,131.21,175.38,141.34,-15.956,131.2,120.83,226.57,101.18,106.43,52.717,-6.3719,185.99,163.26,35.108,169.22,122.56,97.81,76.662,135.46,133.52,96.519,30.869,338.2,97.365,87.045,156.81,221.25,92.815,60.352,288.21,110.2,58.927,159.22,188.88,231.16,157.93,116.29,110.37,163.41,106.53,163.41,65.529,73.006,100.4,138.29,288.72,175.27,64.156,-64.405,62.758,144.77,126.99,81.774,193.84,72.545,148.4,89.87,33.528,44.792,43.636,108.91,282.86,122.4,87.919,78.857,140.21,76.169,-24.52,7.56,55.197,83.655,40.194,54.904,134.4,250.25,44.727,41.943,277.14,106.23,11.133,247.2,28.441,109.92,227.86,-17.041,45.559,36.285,70.097,85.987,66.478,74.564,43.055,71.927,43.966,40.626,159.16,0.89486,46.393,116.73,134.44,40.545,15.893,44.64,140.71,86.652,163.51,50.371,-5.2614,53.575,26.986,151.48,26.076,-45.436,37.3,92.224,40.406,51.225,51.499,48.256,39.987,37.563,26.272,40.428,44.487,49.466,36.646,25.899,123.07,41.074,35.711,16.465,140.49,86.566,13.582,33.926,124.61,31.862,35.054,75.267,9.9706,76.567,56.192,27.614,37.218,33.238,39.211,42.091,49.986,36.142,49.143,17.995,26.193"
		 if(value==2)
			 colmon="95,185.73,158.44,149.37,122.57,90.703,10.399,112.69,104.89,133.99,230.48,162.25,84.443,65.015,147.9,210.05,145.85,311.56,159.15,318.89,205.97,220.1,216.7,180.17,142.62,120.05,201.55,3.9704,83.893,204.08,55.807,218.82,78.61,95.081,159.98,37.072,65.755,84.617,59.468,128.22,34.756,174.43,140.54,65.769,72.562,132.22,163.29,93.585,156.68,120.86,77.102,139.69,120.01,139.19,140.13,-17.248,204.5,97.945,90.436,240.56,39.958,143.41,244.86,-9.545,175.65,75.968,125.22,93.718,274.09,88.725,111.01,121.81,236.48,190.34,61.068,136.56,66.479,196.84,41.4,188.57,45.777,97.521,150.54,245.12,82.219,301.71,199.3,166.05,126.97,37.408,141.69,84.353,54.984,149.38,219.37,139.64,119.26,87.344,193.72,54.922,173.94,54.854,5.3679,165.92,73.096,208.42,162.31,169,51.925,11.635,123.7,71.169,-40.74,147.27,75.056,44.559,117.32,46.191,84.092,94.96,187.89,97.189,86.529,35.021,52.331,51.9,122.64,50.071,189.06,0.90786,44.018,64.427,53.044,85.394,35.577,94.326,24.755,50.416,38.281,53.622,-0.68908,53.395,41.838,42.921,15.146,12.097,161.13,50.455,63.999,92.375,-39.429,26.907,77.258,53.837,58.903,76.963,48.547,44.82,33.622,46.92,43.092,10.615,11.787,119.5,84.218,51.064,95.598,48.81,42.061,25.935,23.849,46.724,52.073,22.49,41.894,61.783,35.063,50.096,48.389,22.33,49.466,47.742,28.94,39.247,28.547,23.495,39.237,24.64,25.101,21.539,31.024,41.386,37.124,27.713,11.338,12.339"
			 if(value==4)
				 colmon= "50,203.04,189.68,215.56,118.62,227.28,117.16,123.69,282.67,176.69,180.02,109.2,8.0688,183.95,142.69,209.92,218.28,69.569,165.02,172.53,55.774,102.35,25.617,158.99,228.3,211.53,117.6,193,95.028,175.43,90.065,173.68,105.68,157.87,34.287,112.35,90.492,171.31,22.131,47.417,162.29,304.17,162.33,232.66,114.42,149.43,50.74,300.97,37.89,128.94,123.13,222.36,202.16,235.36,179.93,167.67,178.72,60.49,243.4,70.563,142.85,68.739,128.73,164.81,74.087,13.418,66.193,108.35,126.5,158.81,98.292,39.794,111.52,29.467,202.9,129.91,72.618,-48.842,105.49,42.16,296.65,133.89,68.872,169.91,238.03,95.891,271.61,84.638,198.45,104,100.1,27.07,-5.372,130.01,104.42,87.638,111.42,81.653,43.893,34.625,73.619,85.912,57.276,157.34,80.577,111.91,67.4,40.553,31.078,34.9,27.581,58.026,89.266,17.968,68.816,58.075,18.955,64.05,28.314,75.843,57.941,95.4,39.849,111.27,48.741,61.787,48.712,70.213,79.255,65.952,49.885,41.351,40.378,44.714,85.602,41.998,36.223,82.491,84.691,29.939,52.551,33.379,42.737,40.826,29.232,65.355,29.482,43.034,25.439,27.718,38.042,26.194,14.399,31.788,18.69,25.955,28.243,20.779,13.162,20.977,18.265,25.477,14.947,17.639,11.951,14.293"
    
		 var dataStrArr2=colmon.split(",");
	 dataStrArr2.forEach(function(data,index,arr){  
	    	data3.push(+data);  
	    	
	    }); 
    
    chart3.series[1].update({
    	data:data3
    });
}




	function upDateTable(id){
		 var Group=1
		 var values
		if(id==1){
			 values="112,98,69,82,91,93,91,95,111,96,97,124,95,107,83,84,50,28,87,16,57,111,113,20,145,119,66,97,90,115,8,48,106,7,11,19,21,50,142,28,18,10,59,109,114,47,135,92,21,79,114,29,26,97,137,15,103,37,114,100,21,54,72,28,128,14,77,8,121,94,118,50,131,126,113,10,34,107,63,90,8,9,137,58,118,89,116,115,136,28,38,20,85,55,128,137,82,59,117,20\n" + 
			  			"";
			 Group=1
		}
				 if(id==2){
					 values= "18,79,106,110,15,155,6,90,11,79,6,73,30,11,37,67,68,99,22,54,97,10,142,77,88,163,126,138,83,78,75,11,53,173,63,100,151,55,48,37,44,27,18,6,15,112,131,13,122,13,98,53,52,106,103,152,123,26,178,73,169,39,39,14,11,121,86,56,115,17,148,104,78,86,98,36,94,52,91,15,141,74,146,17,47,194,21,79,97,8,9,73,183,97,73,49,31,97,9,14,106,8,8,106,116,120,61,168,35,80,9,50,151,78,91,7,181,150,106,15,67,145,180,7,179,124,82,108,79,121,120,39,38,9,167,87,88,7,51,55,155,47,81,43,98,10,92,11,165,34,115,59,99,103,108,83,171,15,9,42,13,41,88,14,155,188,96,82,135,182,36,107,14,95,142,23,6,144,35,97,68,14,67,191,19,10,158,183,43,12,148,13,37,122,80,93,132,32,103,174,111,68,192,121,134,48,85,8,23,8,6,57,83,172,101,81,86,165,73,121,139,75,151,145,11,108,14,126,61,85,8,101,153,89,190,12,62,134,101,121,167,17,161,181,16,152,148,56,111,23,84,12,43,48,122,191,56,131,51\n" + 
					 		"";
					 Group=2
					 }
					 if(id==3){
						 values= "44,51,27,120,101,99,71,55,55,66,77,115,115,31,108,56,136,132,85,56,18,119,78,9,58,11,88,144,124,89,79,55,71,65,87,137,145,22,8,41,131,115,128,69,111,7,137,55,135,11,78,120,87,87,55,93,88,40,49,128,129,58,117,28,115,87,92,103,100,63,35,45,99,117,45,27,86,20,18,133,15,6,145,104,56,25,68,144,41,51,81,14,67,10,127,113,123,17,8,28\n" + 
						 		"";
						 Group=3
					 }
						 if(id==4){
							 values= "22,39,107,75,149,78,94,14,99,162,143,7,71,105,12,160,162,104,194,82,91,11,26,142,39,92,76,124,64,118,6,22,147,126,36,73,89,11,151,10,97,30,42,60,85,134,34,45,24,86,119,151,142,176,157,67,97,8,154,139,51,33,184,46,12,133,46,46,12,33,15,176,23,89,124,163,25,74,78,114,96,10,172,166,115,70,94,56,86,96,50,73,154,129,171,71,105,113,37,7,13,22,9,120,100,107,41,153,126,59,18,66,13,14,139,13,75,8,109,137,41,192,23,86,184,15,195,126,120,165,101,116,126,36,7,122,159,88,173,146,130,108,53,162,59,100,56,145,76,57,31,88,173,34,7,133,172,6,22,83,82,84,95,174,111,72,109,87,179,158,126,12,8,10,123,103,12,106,12,32,37,116,15,10,46,142,24,135,56,43,178,71,104,15,166,89,36,11,92,96,59,13,167,151,154,109,116,91,11,88,108,76,14,89,145,17,66,154,41,182,73,39,58,14,145,88,162,189,120,98,33,184,110,68,24,75,18,16,166,98,176,81,118,35,131,194,112,26\n" + 
							 		"";
							 Group=4
						 }
						 
						 
		 var dataTmp=values.split(",");
		 var  dataTmp2= new Array();
		 var map = new Map(); //new一个对象 ，键值唯一
		
		 dataTmp.forEach(function(data,index,arr){  
			 dataTmp2.push(+data);  
		    });  
		 
		 
		 var tt=new  Array();
		 for(var i=0;i<dataTmp2.length;i++){
			tt.push(dataTmp2[i]*1000+i+1);
		 }
		 
		 tt.sort(compare);
		 var res=tt.slice(0,10)
		 var testTbody = $("#table");
		 var index2=2
		 var index3=3
		
		 CearTableAllRow()
		 for(var i=0;i<res.length;i++){
				/*alert(res[i]/1000)
				alert(res[i]%1000)*/
			  index2=res[i]%1000
			  index3=parseInt(res[i]/1000)
				 var test = "<tr id='dataRow' style='text-align: center'>" + 
		         "<td>" + (i+1) + "</td>" +
		         "<td>" + index2 + "</td>" +
		         "<td>" + index3 + "</td>" +
		         "</tr>";
		          testTbody.append(test);
			 }
		 
	}
	
	function compare(val1,val2){
	    return val1-val2;
	}
	
	
	function CearTableAllRow() {
	    var table = document.getElementById("table"),
	        trs = table.getElementsByTagName("tr");
	           
	    for(var i = trs.length - 1; i >= 0; i--) {
	        table.deleteRow(i);
	    }
	}
	
	
	
	



